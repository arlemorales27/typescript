<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Playground TypeScript — Ejecuta código</title>
  <link rel="stylesheet" href="/css/styles.css" />
  <style>
    .playground{display:grid;grid-template-columns:1fr 420px;gap:16px}
    textarea{width:100%;height:60vh;background:#041022;border-radius:8px;border:1px solid rgba(255,255,255,0.04);color:#dff; padding:12px;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', monospace}
    .controls{display:flex;gap:8px;margin-bottom:8px}
    .output{background:#050612;border-radius:8px;padding:12px;color:#cfe6ff;height:60vh;overflow:auto}
    iframe{width:100%;height:100%;border:1px solid rgba(255,255,255,0.05);border-radius:8px}
    @media (max-width:900px){ .playground{grid-template-columns:1fr} iframe{height:300px} textarea{height:300px} }
  </style>
</head>
<body>
  <main class="container">
    <a href="/index.html">← Volver al índice</a>
    <h1>Playground TypeScript</h1>
    <p class="muted">Escribe TypeScript a la izquierda, compílalo y ejecútalo en un sandbox a la derecha. El playground intenta usar <strong>esbuild-wasm</strong> (más rápido y con mejor soporte) y, si falla, usa el compilador TypeScript del CDN.</p>

    <div class="playground">
      <div>
        <div class="controls">
          <button id="runBtn">Ejecutar</button>
          <button id="buildBtn">Compilar (ver JS)</button>
          <button id="resetBtn">Reset</button>
          <label style="margin-left:auto;color:var(--muted)">Target:
            <select id="targetSel">
              <option value="es2020">ES2020</option>
              <option value="es2018">ES2018</option>
              <option value="esnext">ESNext</option>
            </select>
          </label>
        </div>
        <div style="margin-top:8px;margin-bottom:6px;">
          <label for="codeArea" style="display:inline-block;color:var(--muted);font-size:14px;">Editor de TypeScript (escribe aquí)</label>
        </div>
        <textarea id="codeArea" aria-label="Editor de TypeScript" title="Editor de TypeScript">// Ejemplo rápido
function greet(name: string){
  console.log(`Hola, ${name}`);
}

greet('Playground');

// Prueba un generic
type Box<T> = { value: T }
const b: Box<number> = { value: 42 }
console.log('Box:', b.value);
</textarea>
      </div>

      <div>
        <h3>Salida / JS compilado</h3>
        <div class="output" id="output" role="log" aria-live="polite"></div>
        <h4 style="margin-top:12px">Sandbox</h4>
        <iframe id="sandbox" sandbox="allow-scripts" title="Sandbox de ejecución" role="region"></iframe>
      </div>
    </div>

    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-left">
          <strong>Playground</strong>
          <span class="muted">Ejecuta y prueba snippets · Profesor: Arle Morales Ortiz · 2025</span>
        </div>
        <div class="footer-right">
          <span class="footer-badge"><span class="dot"></span> Sandbox seguro</span>
        </div>
      </div>
    </footer>
   </main>

   <!-- Cargar esbuild-wasm (mejor soporte) y el script del playground que usará esbuild cuando esté disponible -->
   <script src="https://unpkg.com/esbuild-wasm@0.17.19/esbuild-wasm.js"></script>
   <script src="https://unpkg.com/typescript@5.4.2/lib/typescript.js"></script>
   <script src="/js/playground.js"></script>
 </body>
 </html>
