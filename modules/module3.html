<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Módulo 3 — Integración y herramientas</title>
  <link rel="stylesheet" href="/css/styles.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
</head>
<body>
  <main class="container">
    <a href="/index.html">← Volver al índice</a>
    <h1 class="hpop">Módulo 3 – Integración con entorno, herramientas y frameworks</h1>

    <div class="toc fade-in">
      <strong>Contenido</strong>
      <ol class="fancy">
        <li><a href="#dts">Ficheros de definición (.d.ts) y interoperabilidad</a></li>
        <li><a href="#frontend">Desarrollo frontend con TS (React/Vue/Angular)</a></li>
        <li><a href="#backend">Desarrollo backend con TS</a></li>
        <li><a href="#tooling">Tooling moderno (Vite, esbuild, bundlers)</a></li>
        <li><a href="#migracion">Migración de JavaScript a TypeScript</a></li>
        <li><a href="#testing">Pruebas, linters y calidad de código</a></li>
        <li><a href="#patrones">Patrones y arquitectura</a></li>
        <li><a href="#ejercicios-3">Ejercicios</a></li>
      </ol>
    </div>

    <section id="dts" class="fade-in">
      <div class="section-title"><h2>Ficheros de definición (.d.ts) y interoperabilidad</h2></div>
      <p>Paso a paso para crear definiciones para librerías JS:</p>
      <h4>Paso 1 — identificar la superficie pública</h4>
      <p>Enumera las funciones y objetos que exporta la librería.</p>
      <h4>Paso 2 — escribir <code>.d.ts</code></h4>
      <div class="code-wrapper"><button class="code-copy-btn">Copiar</button>
        <pre class="language-ts"><code>// mylib.d.ts
declare module 'mylib' {
  export function greet(name: string): string
  export interface Options { verbose?: boolean }
}
</code></pre>
      </div>
      <h4>Paso 3 — publicar</h4>
      <p>Incluye <code>types</code> en package.json o publica en DefinitelyTyped si corresponde.</p>
    </section>

    <section id="frontend" class="fade-in">
      <div class="section-title"><h2>Desarrollo frontend con TypeScript</h2></div>
      <p>Paso a paso: ejemplo React con props complejas y test.</p>

      <h4>Componente tipado con props y eventos</h4>
      <div class="code-wrapper"><button class="code-copy-btn">Copiar</button>
        <pre class="language-ts"><code>type ButtonProps = { onClick: (ev: MouseEvent) => void; label: string }
export function Button({onClick,label}: ButtonProps){
  return <button onClick={onClick}>{label}</button>
}
</code></pre>
      </div>

      <h4>Prueba simple con Vitest</h4>
      <div class="code-wrapper"><button class="code-copy-btn">Copiar</button>
        <pre class="language-ts"><code>import { describe, it, expect } from 'vitest'
import { render } from '@testing-library/react'
import { Button } from './Button'

describe('Button', ()=>{
  it('muestra label', ()=>{
    const { getByText } = render(<Button onClick={()=>{}} label="hola" />)
    expect(getByText('hola')).toBeTruthy()
  })
})
</code></pre>
      </div>
    </section>

    <section id="backend" class="fade-in">
      <div class="section-title"><h2>Desarrollo backend con TypeScript</h2></div>
      <p>Paso a paso: Express tipado y ejemplo GraphQL tipado con Nexus / TypeGraphQL.</p>

      <h4>Express tipado (DTO + controller)</h4>
      <div class="code-wrapper"><button class="code-copy-btn">Copiar</button>
        <pre class="language-ts"><code>type UserDTO = { id: number; name: string }

import express from 'express'
const app = express()
app.get('/user/:id', (req, res) => {
  const id = Number(req.params.id)
  const user: UserDTO = { id, name: 'x' }
  res.json(user)
})
</code></pre>
      </div>

      <h4>GraphQL tipado (conceptual)</h4>
      <div class="code-wrapper"><button class="code-copy-btn">Copiar</button>
        <pre class="language-ts"><code>// usando TypeGraphQL o Nexus puedes definir schemas tipados y resolvers con tipos compartidos
</code></pre>
      </div>
    </section>

    <section id="tooling" class="fade-in">
      <div class="section-title"><h2>Tooling moderno para TS</h2></div>
      <p>Recomendación práctica: usar Vite para frontend (dev server rápido) y esbuild para builds simples. Ejemplo Vite:</p>
      <div class="code-wrapper"><button class="code-copy-btn">Copiar</button>
        <pre class="language-bash"><code>npm create vite@latest my-app -- --template react-ts
cd my-app
npm install
npm run dev</code></pre>
      </div>

      <h4>Consejos de rendimiento</h4>
      <ol class="fancy">
        <li>Habilita <code>incremental</code> y caches en TypeScript.</li>
        <li>Usa esbuild para tareas rápidas de transpile/bundle.</li>
        <li>Divide tipos y codebase en paquetes para mejorar tiempo de resolución.</li>
      </ol>
    </section>

    <section id="migracion" class="fade-in">
      <div class="section-title"><h2>Migración de JavaScript a TypeScript</h2></div>
      <p>Guía paso a paso:</p>
      <ol class="fancy">
        <li>Habilita <code>allowJs</code> y <code>checkJs</code>.</li>
        <li>Renombra archivos gradualmente a <code>.ts</code> y corrige errores.</li>
        <li>Introduce <code>strict</code> progresivamente (activa reglas por paquete si es monorepo).</li>
        <li>Escribe pruebas para cada migración crítica.</li>
      </ol>
    </section>

    <section id="testing" class="fade-in">
      <div class="section-title"><h2>Pruebas, linters y calidad</h2></div>
      <p>Ejemplo de configuración ESLint + @typescript-eslint y script de test con Vitest/Jest.</p>
      <div class="code-wrapper"><button class="code-copy-btn">Copiar</button>
        <pre class="language-bash"><code>npm install -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
# .eslintrc.js ejemplo:
module.exports = { parser: '@typescript-eslint/parser', plugins: ['@typescript-eslint'], extends: ['plugin:@typescript-eslint/recommended'] }
</code></pre>
      </div>
    </section>

    <section id="patrones" class="fade-in">
      <div class="section-title"><h2>Patrones de diseño y arquitectura usando TS</h2></div>
      <p>Inyección de dependencias, DTOs, servicios y repositorios tipados. Ejemplo breve:</p>
      <div class="code-wrapper"><button class="code-copy-btn">Copiar</button>
        <pre class="language-ts"><code>interface IUserRepo { findById(id:number): Promise<UserDTO> }
class UserService {
  constructor(private repo: IUserRepo){}
  async get(id:number){ return this.repo.findById(id) }
}
</code></pre>
      </div>
    </section>

    <section id="ejercicios-3" class="fade-in">
      <div class="section-title"><h2>Ejercicios Módulo 3</h2></div>
      <ol class="fancy">
        <li>Crear <code>globals.d.ts</code> para una librería legacy y escribir tests que lo usen.</li>
        <li>Migrar un endpoint pequeño a TS y añadir pruebas tipadas.</li>
        <li>Configurar ESLint + CI para comprobar type checks en PRs.</li>
      </ol>
    </section>

    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-left">
          <strong>Fin del Módulo 3</strong>
          <span class="muted">Integración, herramientas y prácticas · Profesor: Arle Morales Ortiz · 2025</span>
        </div>
        <div class="footer-right">
          <span class="footer-badge"><span class="dot"></span> Integración & Tooling</span>
        </div>
      </div>
    </footer>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
  <script src="/js/codecopy.js"></script>
  <script src="/js/main.js"></script>
</body>
</html>
